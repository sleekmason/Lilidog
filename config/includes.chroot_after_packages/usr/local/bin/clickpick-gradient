#!/bin/bash
# Based on a script from brontosaurusrex https://forums.bunsenlabs.org/viewtopic.php?id=779&p=9
# with much thanks to the author.
# Adapted for use in Lilidog by sleekmason 02-02-2022
# wallcolGradient

# pick two color and set that gradient as wallpaper
yad --title "Clickpick Gradient" --window-icon=/usr/share/icons/ld-icons/paw-color.png \
--width=310 --height=360 --center --button="OK"!/usr/share/icons/ld-icons/paw-color.png \
--text-info --justify=center --wrap < /usr/share/lilidog/clickpick-gradient.txt --fontname=" Dejavu Sans 11"

one="$(gpick -p -s -o)"
two="$(gpick -p -s -o)"

res="$(xdpyinfo | awk '/dimensions/{print $2}')"

doit () {
    echo "$one > $two @ $res"
    convert -size "${res}" gradient:"${one}-${two}" -channel RGB -separate -dither FloydSteinberg -colors 256 -combine -depth 8 ~/Pictures/wallpapers/Gradient.png && \
    feh --bg-scale ~/Pictures/wallpapers/Gradient.png
}

[[ "$one" && "$two" && "$res" ]] && doit
pkill -x feh
