#!/bin/bash
# Batteryicon toggle for tint2 in Lilidog by sleekmason 11-Apr-2022
#
#
FILE="$HOME/.config/tint2/tint2rc"
STRING="# Executor 1"
if  grep -q "$STRING" "$FILE" ; then
         notify-send --urgency low 'Removing Tint2 Battery Indicator' ;
         sed -i '/# Executor 1/,/#-------/d' "$FILE"
         sed -i 's/^battery_low_status.*/battery_low_status = 0/g' "$FILE" 
         sed -i 's/^battery_low_cmd.*/battery_low_cmd =/g' "$FILE"
         sed -i 's/^battery_full_cmd.*/battery_full_cmd =/g' "$FILE"        
 else
          notify-send --urgency low 'Adding Tint2 Battery Indicator' ;
         sed -i '/tooltip_font_color =/r .config/tint2/batt.txt' "$FILE"
         sed -i 's/^battery_low_status.*/battery_low_status = 10/g' "$FILE"
         sed -i "s/^battery_low_cmd.*/battery_low_cmd = notify-send --urgency critical 'Battery Low'/g" "$FILE"
         sed -i "s/^battery_full_cmd.*/battery_full_cmd = notify-send --urgency low 'Battery Fully Charged'/g" "$FILE"
fi
# restart tint2
pkill -x tint2
tint2 &
